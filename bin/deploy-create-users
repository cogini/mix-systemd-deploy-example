#!/usr/bin/env bash

# Create user accounts on target

set -e

export LANG="en_US.UTF-8"

# Config vars
DEPLOY_USER="${DEPLOY_USER:-deploy}"
APP_USER="${APP_USER:-app}"

if [ ! id -u "$DEPLOY_USER" &>/dev/null ]; then
    echo "==> Creating deploy user $DEPLOY_USER"
    useradd -m "$DEPLOY_USER"
fi

if [ "$APP_USER" != "$DEPLOY_USER" ]; then
    if [ ! id -u "$APP_USER" &>/dev/null ]; then
        echo "==> Creating deploy user $APP_USER"
        useradd -m "$APP_USER"
    fi
fi
