#!/usr/bin/env bash

# Copy files to target or staging directory

set -e

export LANG="en_US.UTF-8"

# Environment vars
# DESTDIR, prefix for target files, optional
MIX_ENV="${MIX_ENV:-prod}"

# Config vars
SERVICE_NAME="mix-systemd-deploy"
EXT_NAME="mix-systemd-deploy"

echo "==> Copying systemd unit files for $SERVICE_NAME"
mkdir -p "${DESTDIR}/lib/systemd/system"
cp _build/${MIX_ENV}/systemd/lib/systemd/system/* "${DESTDIR}/lib/systemd/system/"
chmod 644 ${DESTDIR}/lib/systemd/system/${SERVICE_NAME}*

